---
title: Data table filter
section: Components
summary: A powerful data table filter for client-side filtering with TanStack Table.
badge: alpha
---

<div className='py-8 px-16 border border-border rounded-lg bg-white dark:bg-black'>
<DataTableDemo />
</div>

## Introduction

This is an add-on to your existing shadcn/ui data table component. It adds client-side filtering with a clean, modern UI inspired by [Linear](https://linear.app/homepage).

This component relies on [TanStack Table](https://tanstack.com/table), a headless UI for building powerful tables & datagrids.

## Prerequisites

Before you begin:

- Create your `<DataTable />` component. You can follow the [shadcn/ui docs](https://ui.shadcn.com/docs/components/data-table) for guidance.
- Ensure you're using client-side filtering.

## Installation

From the command line, install the component into your project:

```bash
npx shadcn@latest add https://ui.bazza.dev/r/data-table-filter.json
```

## Usage

## Overview

Let's take a high-level look at how we've created the data table filter component.

This will help you understand what each file contains and the general component composition.

### File structure

The data table filter component is composed of several files.

Components are placed in the `@/components` directory and broken up into several files for better organization and readability:

- `data-table-filter.tsx`: The main component file.
- `property-filter-list.tsx`: Renders the applied filters.
- `property-filter-subject.tsx`: Renders the **subject** of a filter, which shows the property name and (optionally) icon.
- `property-filter-operator.tsx`: Renders the filter **operator** controller, which handles how the filter value is applied to the property.
- `property-filter-value.tsx`: Renders the filter **value** controller, which is the actual value that is being filtered on.
- `table-filter-actions.tsx`: The actions that can be performed on the filter, such as clearing the filter.
- `table-filter-menu.tsx`: The filter menu, which is a dropdown menu that appears when clicking on the filter icon. This allows the user to initially start filtering on a property.
- `debounced-input.tsx`: A custom input component that uses the `useDebounce` hook from the `react-use` library.

Types, interfaces, and utilities are placed in the `@/lib` directory:

- `array.ts`: Utility functions for working with arrays.
- `filters.ts`: All TypeScript types, interfaces, and constants related to the data table filter component. Also includes the filter functions `filterFn()` for each column type.
- `table.ts`: Utility functions for working with the TanStack Table library.

### Component structure

A `PropertyFilterItem` component is composed of the following parts:

- `PropertyFilterSubject` shows the name and *(optionally)* icon of the property being filtered on.
- `PropertyFilterOperator` shows the operator used to filter on the property.
- `PropertyFilterValue` shows the actual filter value.

<ResponsiveImage
  lightSrc='/docs/data-table-filter/property-filter-item-composition-light.png'
  darkSrc='/docs/data-table-filter/property-filter-item-composition-dark.png'
  caption='The composition of a property filter item.'
/>

The `PropertyFilterOperator` and `PropertyFilterValue` components are represented by a `Controller` which is essentially a `Popover` with an associated trigger and content.

We can break down the `PropertyFilterValueController` as an example:

- `PropertyFilterValueDisplay` is the popover **trigger**. This displays the filter value for the associated property.
- `PropertyFilterValueMenu` is the popover **content**. This renders the menu for modifying the filter value.

<ResponsiveImage
  lightSrc='/docs/data-table-filter/property-filter-value-composition-light.png'
  darkSrc='/docs/data-table-filter/property-filter-value-composition-dark.png'
  caption='The composition of a property filter value controller.'
/>

The `PropertyFilterOperatorController` has a similar composition and can be inferred from the above description and image.

## Walkthough

Let's walk through a simple example of how we can use the data table filter component to add client-side filtering to our shadcn/ui data table.

### Scenario

Let's build a data table for an issue tracker. We can define the shape of an `Issue` as follows:

```ts title="@/components/ex1/types.ts"
export type IssueStatus = 'backlog' | 'todo' | 'in-progress' | 'done'

export type Issue = {
  id: string
  title: string
  status: IssueStatus
  dueDate?: Date
  estimatedHours?: number
}
```

### Columns

We can start creating the columns for the data table using the `createColumnHelper` function. This ensures we create columns with full type safety.

```ts
import { createColumnHelper } from '@tanstack/react-table'
import type { Issue } from './types'

const columnHelper = createColumnHelper<Issue>()
```

#### Title

Let's start with the `title` column, which displays the issue title.

Let's refer back to the column data types we can pick from:

```ts
type ColumnDataType =
  | 'text'
  | 'number'
  | 'date'
  | 'option'
  | 'multiOption'
```

It's pretty obvious that we want to use the `text` column data type for this column, so let's go ahead with this:

```ts {3,7-18}
import { createColumnHelper } from '@tanstack/react-table'
import type { Issue } from './types'
import { Heading1Icon } from 'lucide-react'

const columnHelper = createColumnHelper<Issue>()

export const columns = [
  columnHelper.accessor('title', {
    id: 'title',
    header: 'Title',
    filterFn: filterFn('text'),
    meta: defineMeta('title', {
      displayName: 'Title',
      type: 'text',
      icon: Heading1Icon,
    }),
  }),
]
```

Note that we're using the `filterFn` function to define the filter function for this column. We provide this out-of-the-box to ensure your column data is properly filtered. All you have to do is pass in the column data type as an argument.

Additionally, we're using the `defineMeta` helper function when we define the column metadata. This is the recommended way to define the column metadata, as it ensures type safety.

- `displayName` is used when showing the property in various filter-related interfaces, such as the filter menu.
- `type` is the column data type (as defined above).
- `icon` is displayed alongside the `displayName`.

#### Due date, estimated hours

Let's get the other "easy" columns done in one swoop:

```ts {3-7,22-41}
import { createColumnHelper } from '@tanstack/react-table'
import type { Issue } from './types'
import {
  Heading1Icon,
  CalendarIcon,
  ClockIcon,
} from 'lucide-react'

const columnHelper = createColumnHelper<Issue>()

export const columns = [
  columnHelper.accessor('title', {
    id: 'title',
    header: 'Title',
    filterFn: filterFn('text'),
    meta: defineMeta('title', {
      displayName: 'Title',
      type: 'text',
      icon: Heading1Icon,
    }),
  }),
  columnHelper.accessor('dueDate', {
    id: 'dueDate',
    header: 'Due Date',
    filterFn: filterFn('date'),
    meta: defineMeta('dueDate', {
      displayName: 'Due Date',
      type: 'date',
      icon: CalendarIcon,
    }),
  }),
  columnHelper.accessor('estimatedHours', {
    id: 'estimatedHours',
    header: 'Estimated Hours',
    filterFn: filterFn('number'),
    meta: defineMeta('estimatedHours', {
      displayName: 'Estimated Hours',
      type: 'number',
      icon: ClockIcon,
    }),
  }),
]
```
